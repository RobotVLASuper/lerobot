# Assemble SO-101

In the steps below we explain how to assemble our flagship robot, the SO-101.

## Source the parts

Follow this [README](https://github.com/TheRobotStudio/SO-ARM100). It contains the bill of materials, with a link to source the parts, as well as the instructions to 3D print the parts,
and advice if it's your first time printing or if you don't own a 3D printer.

Before assembling, you will first need to configure your motors. To this end, we provide a nice script, so let's first install LeRobot. After configuration, we will also guide you through assembly.

## Install LeRobot

To install LeRobot follow our [Installation Guide](./installation)

## Configure motors

To configure the motors designate one bus servo adapter and 6 motors for your leader arm, and similarly the other bus servo adapter and 6 motors for the follower arm. It's convenient to label them and write on each motor if it's for the follower `F` or for the leader `L` and it's ID from 1 to 6.

You now should plug the 5V or 12V power supply to the motor bus. 5V if you use the STS3215 7.4V motors and 12V if you use the STS3215 12V motors. Also, connect the motor bus to your computer via USB. Note that the USB doesn't provide any power, and both the power supply and usb have to be plugged in.

### Find the USB ports associated to each arm

To find the port for each bus servo adapter, run this script:
```bash
python lerobot/scripts/find_motors_bus_port.py
```
##### Example outputs of script

<hfoptions id="example">
<hfoption id="Mac">

Example output leader arm's port: `/dev/tty.usbmodem575E0031751`

```bash
Finding all available ports for the MotorBus.
['/dev/tty.usbmodem575E0032081', '/dev/tty.usbmodem575E0031751']
Remove the usb cable from your MotorsBus and press Enter when done.

[...Disconnect leader arm and press Enter...]

The port of this MotorsBus is /dev/tty.usbmodem575E0031751
Reconnect the usb cable.
```

Example output follower arm port: `/dev/tty.usbmodem575E0032081`

```
Finding all available ports for the MotorBus.
['/dev/tty.usbmodem575E0032081', '/dev/tty.usbmodem575E0031751']
Remove the usb cable from your MotorsBus and press Enter when done.

[...Disconnect follower arm and press Enter...]

The port of this MotorsBus is /dev/tty.usbmodem575E0032081
Reconnect the usb cable.
```

</hfoption>
<hfoption id="Linux">

On Linux, you might need to give access to the USB ports by running:
```bash
sudo chmod 666 /dev/ttyACM0
sudo chmod 666 /dev/ttyACM1
```

Example output leader arm port: `/dev/ttyACM0`

```bash
Finding all available ports for the MotorBus.
['/dev/ttyACM0', '/dev/ttyACM1']
Remove the usb cable from your MotorsBus and press Enter when done.

[...Disconnect leader arm and press Enter...]

The port of this MotorsBus is /dev/ttyACM0
Reconnect the usb cable.
```

Example output follower arm port: `/dev/ttyACM1`

```
Finding all available ports for the MotorBus.
['/dev/ttyACM0', '/dev/ttyACM1']
Remove the usb cable from your MotorsBus and press Enter when done.

[...Disconnect follower arm and press Enter...]

The port of this MotorsBus is /dev/ttyACM1
Reconnect the usb cable.
```
</hfoption>
</hfoptions>

#### Update config file

Now that you have your ports, update the **port** default values of [`SO100RobotConfig`](https://github.com/huggingface/lerobot/blob/main/lerobot/common/robot_devices/robots/configs.py).
You will find something like, update the `port` values with your actual motor ports:
```python
@RobotConfig.register_subclass("so100")
@dataclass
class So100RobotConfig(ManipulatorRobotConfig):
    calibration_dir: str = ".cache/calibration/so100"
    # `max_relative_target` limits the magnitude of the relative positional target vector for safety purposes.
    # Set this to a positive scalar to have the same value for all motors, or a list that is the same length as
    # the number of motors in your follower arms.
    max_relative_target: int | None = None

    leader_arms: dict[str, MotorsBusConfig] = field(
        default_factory=lambda: {
            "main": FeetechMotorsBusConfig(
                port="/dev/tty.usbmodem58760431091",  <-- UPDATE HERE
                motors={
                    # name: (index, model)
                    "shoulder_pan": [1, "sts3215"],
                    "shoulder_lift": [2, "sts3215"],
                    "elbow_flex": [3, "sts3215"],
                    "wrist_flex": [4, "sts3215"],
                    "wrist_roll": [5, "sts3215"],
                    "gripper": [6, "sts3215"],
                },
            ),
        }
    )

    follower_arms: dict[str, MotorsBusConfig] = field(
        default_factory=lambda: {
            "main": FeetechMotorsBusConfig(
                port="/dev/tty.usbmodem585A0076891",  <-- UPDATE HERE
                motors={
                    # name: (index, model)
                    "shoulder_pan": [1, "sts3215"],
                    "shoulder_lift": [2, "sts3215"],
                    "elbow_flex": [3, "sts3215"],
                    "wrist_flex": [4, "sts3215"],
                    "wrist_roll": [5, "sts3215"],
                    "gripper": [6, "sts3215"],
                },
            ),
        }
    )
```

Here is a video of the process:
<video controls width="600">
  <source src="/Users/pepijnkooijmans/Documents/GitHub/lerobot/docs/temp_video/lerobot-find-motorbus.mp4" type="video/mp4" />
  Your browser does not support the video tag.
</video>

### Set motor IDs

Plug your motor in one of the two ports of the motor bus and run this script to set its ID to 1. Replace the text after --port to the corresponding control board port.
```bash
python lerobot/scripts/configure_motor.py \
  --port /dev/tty.usbmodem58760432961 \
  --brand feetech \
  --model sts3215 \
  --baudrate 1000000 \
  --ID 1
```

Then unplug your motor and plug the second motor and set its ID to 2.
```bash
python lerobot/scripts/configure_motor.py \
  --port /dev/tty.usbmodem58760432961 \
  --brand feetech \
  --model sts3215 \
  --baudrate 1000000 \
  --ID 2
```

Redo this process for all your motors until ID 6. Do the same for the 6 motors of the leader arm.

Here is a video of the process:
<video controls width="600">
  <source src="/Users/pepijnkooijmans/Documents/GitHub/lerobot/docs/temp_video/lerobot-configure-motor.mp4" type="video/mp4" />
  Your browser does not support the video tag.
</video>

## Step-by-Step Assembly Instructions

### Clean Parts
Remove all support material from the 3D-printed parts.

### Joint 1

- Place the first motor into the base.
- Fasten the motor with 4 screws, what screws?. Two from the bottom and two from top.
- Slide over the first motor holder and fasten it using two screws (one on each side).
- Install both motor horns, securing the top horn with a screw.
- Attach the shoulder part.
- Tighten the shoulder part with 4 screws on top and 4 on the bottom
- Add the shoulder motor holder.

<video controls width="600">
  <source src="/Users/pepijnkooijmans/Documents/GitHub/lerobot/docs/temp_video/SO101-Joint1.mp4" type="video/mp4" />
  Your browser does not support the video tag.
</video>

### Joint 2

- Slide the second motor in from the top.
- Fasten the second motor with 4 screws.
- Attach both motor horns to motor 2, again use the horn screw.
- Attach the upper arm with 4 screws on each side.

<video controls width="600">
  <source src="/Users/pepijnkooijmans/Documents/GitHub/lerobot/docs/temp_video/SO101-Joint2.mp4" type="video/mp4" />
  Your browser does not support the video tag.
</video>

### Joint 3

- Assemble motor 3 using 4 screws
- Attach both motor horns to motor 3 and secure one again with a horn screw.
- Connect the forearm to motor 3 using 4 screws on each side.
- Slide over motor holder 4.

<video controls width="600">
  <source src="/Users/pepijnkooijmans/Documents/GitHub/lerobot/docs/temp_video/SO101-Joint3.mp4" type="video/mp4" />
  Your browser does not support the video tag.
</video>

### Joint 4

- Slide in motor 4.
- Fasten motor 4 with 4 screws and attach its motor horns, use a horn screw.

<video controls width="600">
  <source src="/Users/pepijnkooijmans/Documents/GitHub/lerobot/docs/temp_video/SO101-Joint4.mp4" type="video/mp4" />
  Your browser does not support the video tag.
</video>

### Joint 5

- Insert motor 5 into the wrist holder and secure it with 2 front screws.
- Secure the wrist to motor 4 using 4 screws on both sides.
- Install only one motor horn on the wrist motor and secure it with a horn screw.

<video controls width="600">
  <source src="/Users/pepijnkooijmans/Documents/GitHub/lerobot/docs/temp_video/SO101-Joint5.mp4" type="video/mp4" />
  Your browser does not support the video tag.
</video>

### Gripper / Handle

<hfoptions id="assembly">
<hfoption id="Follower">

- Attach the gripper to motor 5.
- Insert the gripper motor and secure it with 3 screws on each side.
- Attach the motor horns and again use a horn screw.
- Install the gripper claw and secure it with 4 screws on both sides.

<video controls width="600">
  <source src="/Users/pepijnkooijmans/Documents/GitHub/lerobot/docs/temp_video/SO101-Gripper.mp4" type="video/mp4" />
  Your browser does not support the video tag.
</video>

</hfoption>
<hfoption id="Leader">

- Mount the leader holder onto the wrist and secure it with a screw.
- Attach the handle to motor 5 using 4 screws.
- Insert the gripper motor, secure it with 3 screws on each side, attach a motor horn using a horn screw, and connect the motor wire.
- Attach the follower trigger with 4 screws.

<video controls width="600">
  <source src="/Users/pepijnkooijmans/Documents/GitHub/lerobot/docs/temp_video/SO101-Gripper.mp4" type="video/mp4" />
  Your browser does not support the video tag.
</video>

</hfoption>
</hfoptions>

##### Wiring

- Attach the motor controller on the back.

<video controls width="600">
  <source src="/Users/pepijnkooijmans/Documents/GitHub/lerobot/docs/temp_video/SO101-Wiring.mp4" type="video/mp4" />
  Your browser does not support the video tag.
</video>

## Calibrate

Next, you'll need to calibrate your SO-100 robot to ensure that the leader and follower arms have the same position values when they are in the same physical position.
The calibration process is very important because it allows a neural network trained on one SO-100 robot to work on another.

TODO(pepijn): Update with new calibration method

Congrats 🎉, your robot is all set to learn a task on its own. Start training it by following this tutorial: [Getting started with real-world robots](./getting_started_real_world_robot)
